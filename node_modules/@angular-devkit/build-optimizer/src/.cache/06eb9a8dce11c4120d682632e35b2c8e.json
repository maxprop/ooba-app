{"remainingRequest":"/Users/scottjoscelyne/Desktop/oasis/node_modules/@angular-devkit/build-optimizer/src/build-optimizer/webpack-loader.js??ref--8-1!/Users/scottjoscelyne/Desktop/oasis/node_modules/formiojs/components/tabs/Tabs.js","dependencies":[{"path":"/Users/scottjoscelyne/Desktop/oasis/node_modules/formiojs/components/tabs/Tabs.js","mtime":1581861142304},{"path":"/Users/scottjoscelyne/Desktop/oasis/node_modules/cache-loader/dist/cjs.js","mtime":1571276078087},{"path":"/Users/scottjoscelyne/Desktop/oasis/node_modules/@angular-devkit/build-optimizer/src/build-optimizer/webpack-loader.js","mtime":1571276072802}],"contextDependencies":[],"result":["\"use strict\";\n\nrequire(\"core-js/modules/es.symbol\");\n\nrequire(\"core-js/modules/es.symbol.description\");\n\nrequire(\"core-js/modules/es.symbol.iterator\");\n\nrequire(\"core-js/modules/es.array.concat\");\n\nrequire(\"core-js/modules/es.array.iterator\");\n\nrequire(\"core-js/modules/es.array.map\");\n\nrequire(\"core-js/modules/es.object.get-own-property-descriptor\");\n\nrequire(\"core-js/modules/es.object.get-prototype-of\");\n\nrequire(\"core-js/modules/es.object.to-string\");\n\nrequire(\"core-js/modules/es.reflect.get\");\n\nrequire(\"core-js/modules/es.string.iterator\");\n\nrequire(\"core-js/modules/web.dom-collections.for-each\");\n\nrequire(\"core-js/modules/web.dom-collections.iterator\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _NestedComponent2 = _interopRequireDefault(require(\"../nested/NestedComponent\"));\n\nvar _Base = _interopRequireDefault(require(\"../base/Base\"));\n\nvar _lodash = _interopRequireDefault(require(\"lodash\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _get(target, property, receiver) { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return _get(target, property, receiver || target); }\n\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nvar TabsComponent =\n/*#__PURE__*/\nfunction (_NestedComponent) {\n  _inherits(TabsComponent, _NestedComponent);\n\n  _createClass(TabsComponent, null, [{\n    key: \"schema\",\n    value: function schema() {\n      for (var _len = arguments.length, extend = new Array(_len), _key = 0; _key < _len; _key++) {\n        extend[_key] = arguments[_key];\n      }\n\n      return _NestedComponent2.default.schema.apply(_NestedComponent2.default, [{\n        label: 'Tabs',\n        type: 'tabs',\n        input: false,\n        key: 'tabs',\n        persistent: false,\n        components: [{\n          label: 'Tab 1',\n          key: 'tab1',\n          components: []\n        }]\n      }].concat(extend));\n    }\n  }, {\n    key: \"builderInfo\",\n    get: function get() {\n      return {\n        title: 'Tabs',\n        group: 'layout',\n        icon: 'fa fa-folder-o',\n        weight: 50,\n        documentation: 'http://help.form.io/userguide/#tabs',\n        schema: TabsComponent.schema()\n      };\n    }\n  }]);\n\n  function TabsComponent(component, options, data) {\n    var _this;\n\n    _classCallCheck(this, TabsComponent);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(TabsComponent).call(this, component, options, data));\n    _this.currentTab = 0;\n    _this.validityTabs = [];\n    return _this;\n  }\n\n  _createClass(TabsComponent, [{\n    key: \"build\",\n    value: function build(state, showLabel) {\n      var _this2 = this;\n\n      if (this.options.flatten) {\n        this.element = _get(_getPrototypeOf(TabsComponent.prototype), \"createElement\", this).call(this);\n        this.component.components.forEach(function (tab) {\n          var body;\n\n          var panel = _this2.ce('div', {\n            id: _this2.id,\n            class: 'mb-2 card border panel panel-default'\n          }, [_this2.ce('div', {\n            class: 'card-header bg-default panel-heading'\n          }, _this2.ce('h4', {\n            class: 'mb-0 card-title panel-title'\n          }, tab.label)), body = _this2.ce('div', {\n            class: 'card-body panel-body'\n          })]);\n\n          tab.components.forEach(function (component) {\n            return _this2.addComponent(component, body, _this2.data, null, null, _this2.getComponentState(component, state));\n          });\n\n          _this2.element.appendChild(panel);\n        });\n      } else {\n        return _get(_getPrototypeOf(TabsComponent.prototype), \"build\", this).call(this, state, showLabel);\n      }\n    }\n  }, {\n    key: \"createElement\",\n    value: function createElement() {\n      var _this3 = this;\n\n      this.tabsBar = this.ce('ul', {\n        class: 'nav nav-tabs'\n      });\n      this.tabsContent = this.ce('div', {\n        class: 'tab-content'\n      });\n      this.tabLinks = [];\n      this.tabs = [];\n      this.component.components.forEach(function (tab, index) {\n        var tabLink = _this3.ce('a', {\n          class: 'nav-link',\n          href: \"#\".concat(tab.key)\n        }, tab.label);\n\n        _this3.addEventListener(tabLink, 'click', function (event) {\n          event.preventDefault();\n\n          _this3.setTab(index);\n        });\n\n        var tabElement = _this3.ce('li', {\n          class: 'nav-item',\n          role: 'presentation'\n        }, tabLink);\n\n        tabElement.tabLink = tabLink;\n\n        _this3.tabsBar.appendChild(tabElement);\n\n        _this3.tabLinks.push(tabElement);\n\n        var tabPanel = _this3.ce('div', {\n          role: 'tabpanel',\n          class: 'tab-pane',\n          id: tab.key\n        });\n\n        _this3.tabsContent.appendChild(tabPanel);\n\n        _this3.tabs.push(tabPanel);\n      });\n\n      if (this.element) {\n        this.appendChild(this.element, [this.tabsBar, this.tabsContent]);\n        this.element.className = this.className;\n        return this.element;\n      }\n\n      this.element = this.ce('div', {\n        id: this.id,\n        class: this.className\n      }, [this.tabsBar, this.tabsContent]);\n      this.element.component = this;\n      return this.element;\n    }\n    /**\n     * Set the current tab.\n     *\n     * @param index\n     */\n\n  }, {\n    key: \"setTab\",\n    value: function setTab(index, state) {\n      var _this4 = this;\n\n      if (!this.tabs || !this.component.components || !this.component.components[this.currentTab] || this.currentTab >= this.tabs.length) {\n        return;\n      }\n\n      this.currentTab = index; // Get the current tab.\n\n      var tab = this.component.components[index];\n      this.empty(this.tabs[index]);\n      this.components.map(function (comp) {\n        return comp.destroy();\n      });\n      this.components = [];\n\n      if (this.tabLinks.length <= index) {\n        return;\n      }\n\n      this.tabLinks.forEach(function (tabLink) {\n        return _this4.removeClass(tabLink, 'active').removeClass(tabLink.tabLink, 'active');\n      });\n      this.tabs.forEach(function (tab) {\n        return _this4.removeClass(tab, 'active');\n      });\n      this.addClass(this.tabLinks[index], 'active').addClass(this.tabLinks[index].tabLink, 'active').addClass(this.tabs[index], 'active');\n      var components = this.hook('addComponents', tab.components, this);\n      components.forEach(function (component) {\n        return _this4.addComponent(component, _this4.tabs[index], _this4.data, null, null, state);\n      });\n      this.restoreValue();\n      this.triggerChange();\n    }\n    /**\n     * Return all the components within all the tabs.\n     */\n\n  }, {\n    key: \"getAllComponents\",\n    value: function getAllComponents() {\n      // If the validity tabs are set, then this usually means we are getting the components that have\n      // triggered errors and need to iterate through these to display them.\n      if (this.validityTabs && this.validityTabs.length) {\n        var comps = this.validityTabs.reduce(function (components, component) {\n          if (component && component.getAllComponents) {\n            component = component.getAllComponents();\n          }\n\n          return components.concat(component);\n        }, []);\n        this.validityTabs = [];\n        return comps;\n      }\n\n      return _get(_getPrototypeOf(TabsComponent.prototype), \"getAllComponents\", this).call(this);\n    }\n    /**\n     * Checks the validity by checking all tabs validity.\n     *\n     * @param data\n     * @param dirty\n     */\n\n  }, {\n    key: \"checkValidity\",\n    value: function checkValidity(data, dirty) {\n      var _this5 = this;\n\n      if (!dirty) {\n        return _get(_getPrototypeOf(TabsComponent.prototype), \"checkValidity\", this).call(this, data, dirty);\n      }\n\n      if (!this.checkCondition(null, data)) {\n        this.setCustomValidity('');\n        return true;\n      }\n\n      var isValid = _Base.default.prototype.checkValidity.call(this, data, dirty);\n\n      this.validityTabs = [];\n      return this.component.components.reduce(function (check, comp) {\n        var tabComp = _lodash.default.clone(comp);\n\n        tabComp.type = 'panel';\n        tabComp.internal = true;\n\n        var component = _this5.createComponent(tabComp);\n\n        _this5.validityTabs.push(component);\n\n        var valid = component.checkValidity(data, dirty) && check;\n        component.destroy();\n        return valid;\n      }, isValid);\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      var state = _get(_getPrototypeOf(TabsComponent.prototype), \"destroy\", this).call(this) || {};\n      state.currentTab = this.currentTab;\n      return state;\n    }\n    /**\n     * Make sure to include the tab on the component as it is added.\n     *\n     * @param component\n     * @param element\n     * @param data\n     * @param before\n     * @return {BaseComponent}\n     */\n\n  }, {\n    key: \"addComponent\",\n    value: function addComponent(component, element, data, before, noAdd, state) {\n      component.tab = this.currentTab;\n      return _get(_getPrototypeOf(TabsComponent.prototype), \"addComponent\", this).call(this, component, element, data, before, noAdd, state);\n    }\n    /**\n     * Only add the components for the active tab.\n     */\n\n  }, {\n    key: \"addComponents\",\n    value: function addComponents(element, data, options, state) {\n      var _ref = state && state.currentTab ? state : this,\n          currentTab = _ref.currentTab;\n\n      this.setTab(currentTab, state);\n    }\n  }, {\n    key: \"defaultSchema\",\n    get: function get() {\n      return TabsComponent.schema();\n    }\n  }, {\n    key: \"schema\",\n    get: function get() {\n      var _this6 = this;\n\n      var schema = _get(_getPrototypeOf(TabsComponent.prototype), \"schema\", this);\n\n      schema.components = this.component.components.map(function (tab, index) {\n        if (index === _this6.currentTab) {\n          tab.components = _this6.getComponents().map(function (component) {\n            return component.schema;\n          });\n        }\n\n        return tab;\n      });\n      return schema;\n    }\n  }]);\n\n  return TabsComponent;\n}(_NestedComponent2.default);\n\nexports.default = TabsComponent;",null]}