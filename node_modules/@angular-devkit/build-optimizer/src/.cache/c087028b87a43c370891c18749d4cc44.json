{"remainingRequest":"/Users/scottjoscelyne/Desktop/oasis/node_modules/@angular-devkit/build-optimizer/src/build-optimizer/webpack-loader.js??ref--8-1!/Users/scottjoscelyne/Desktop/oasis/node_modules/formiojs/components/button/Button.js","dependencies":[{"path":"/Users/scottjoscelyne/Desktop/oasis/node_modules/formiojs/components/button/Button.js","mtime":1581861142209},{"path":"/Users/scottjoscelyne/Desktop/oasis/node_modules/cache-loader/dist/cjs.js","mtime":1571276078087},{"path":"/Users/scottjoscelyne/Desktop/oasis/node_modules/@angular-devkit/build-optimizer/src/build-optimizer/webpack-loader.js","mtime":1571276072802}],"contextDependencies":[],"result":["\"use strict\";\n\nrequire(\"core-js/modules/es.symbol\");\n\nrequire(\"core-js/modules/es.symbol.description\");\n\nrequire(\"core-js/modules/es.symbol.iterator\");\n\nrequire(\"core-js/modules/es.array.concat\");\n\nrequire(\"core-js/modules/es.array.includes\");\n\nrequire(\"core-js/modules/es.array.iterator\");\n\nrequire(\"core-js/modules/es.array.join\");\n\nrequire(\"core-js/modules/es.array.map\");\n\nrequire(\"core-js/modules/es.function.name\");\n\nrequire(\"core-js/modules/es.object.get-own-property-descriptor\");\n\nrequire(\"core-js/modules/es.object.get-prototype-of\");\n\nrequire(\"core-js/modules/es.object.keys\");\n\nrequire(\"core-js/modules/es.object.to-string\");\n\nrequire(\"core-js/modules/es.reflect.get\");\n\nrequire(\"core-js/modules/es.reflect.set\");\n\nrequire(\"core-js/modules/es.regexp.constructor\");\n\nrequire(\"core-js/modules/es.regexp.to-string\");\n\nrequire(\"core-js/modules/es.string.iterator\");\n\nrequire(\"core-js/modules/es.string.replace\");\n\nrequire(\"core-js/modules/es.string.search\");\n\nrequire(\"core-js/modules/es.string.split\");\n\nrequire(\"core-js/modules/web.dom-collections.iterator\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _lodash = _interopRequireDefault(require(\"lodash\"));\n\nvar _Base = _interopRequireDefault(require(\"../base/Base\"));\n\nvar _utils = require(\"../../utils/utils\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction set(target, property, value, receiver) { if (typeof Reflect !== \"undefined\" && Reflect.set) { set = Reflect.set; } else { set = function set(target, property, value, receiver) { var base = _superPropBase(target, property); var desc; if (base) { desc = Object.getOwnPropertyDescriptor(base, property); if (desc.set) { desc.set.call(receiver, value); return true; } else if (!desc.writable) { return false; } } desc = Object.getOwnPropertyDescriptor(receiver, property); if (desc) { if (!desc.writable) { return false; } desc.value = value; Object.defineProperty(receiver, property, desc); } else { _defineProperty(receiver, property, value); } return true; }; } return set(target, property, value, receiver); }\n\nfunction _set(target, property, value, receiver, isStrict) { var s = set(target, property, value, receiver || target); if (!s && isStrict) { throw new Error('failed to set property'); } return value; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _get(target, property, receiver) { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return _get(target, property, receiver || target); }\n\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nvar ButtonComponent =\n/*#__PURE__*/\nfunction (_BaseComponent) {\n  _inherits(ButtonComponent, _BaseComponent);\n\n  function ButtonComponent() {\n    _classCallCheck(this, ButtonComponent);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(ButtonComponent).apply(this, arguments));\n  }\n\n  _createClass(ButtonComponent, [{\n    key: \"elementInfo\",\n    value: function elementInfo() {\n      var info = _get(_getPrototypeOf(ButtonComponent.prototype), \"elementInfo\", this).call(this);\n\n      info.type = 'button';\n      info.attr.type = ['submit', 'saveState'].includes(this.component.action) ? 'submit' : 'button';\n      this.component.theme = this.component.theme || 'default';\n      info.attr.class = \"btn btn-\".concat(this.component.theme);\n\n      if (this.component.size) {\n        info.attr.class += \" btn-\".concat(this.component.size);\n      }\n\n      if (this.component.block) {\n        info.attr.class += ' btn-block';\n      }\n\n      if (this.component.customClass) {\n        info.attr.class += \" \".concat(this.component.customClass);\n      }\n\n      return info;\n    }\n  }, {\n    key: \"createLabel\",\n    // No label needed for buttons.\n    value: function createLabel() {}\n  }, {\n    key: \"createInput\",\n    value: function createInput(container) {\n      this.buttonElement = _get(_getPrototypeOf(ButtonComponent.prototype), \"createInput\", this).call(this, container);\n      return this.buttonElement;\n    }\n  }, {\n    key: \"getValue\",\n    value: function getValue() {\n      return this.dataValue;\n    }\n  }, {\n    key: \"buttonMessage\",\n    value: function buttonMessage(message) {\n      return this.ce('span', {\n        class: 'help-block'\n      }, this.text(message));\n    }\n    /* eslint-disable max-statements */\n\n  }, {\n    key: \"build\",\n    value: function build() {\n      var _this = this;\n\n      if (this.viewOnly || this.options.hideButtons) {\n        this.component.hidden = true;\n      }\n\n      this.dataValue = false;\n      this.hasError = false;\n      this.createElement();\n      this.createInput(this.element);\n      this.addShortcut(this.buttonElement);\n\n      if (this.component.leftIcon) {\n        this.buttonElement.appendChild(this.ce('span', {\n          class: this.component.leftIcon\n        }));\n        this.buttonElement.appendChild(this.text(' '));\n      }\n\n      if (!this.labelIsHidden()) {\n        this.labelElement = this.text(this.addShortcutToLabel());\n        this.buttonElement.appendChild(this.labelElement);\n        this.createTooltip(this.buttonElement, null, this.iconClass('question-sign'));\n      }\n\n      if (this.component.rightIcon) {\n        this.buttonElement.appendChild(this.text(' '));\n        this.buttonElement.appendChild(this.ce('span', {\n          class: this.component.rightIcon\n        }));\n      }\n\n      var onChange = null;\n      var onError = null;\n\n      if (this.component.action === 'submit') {\n        var message = this.ce('div');\n        this.on('submitButton', function () {\n          _this.loading = true;\n          _this.forceDisabled = true;\n        }, true);\n        this.on('submitDone', function () {\n          _this.loading = false;\n          _this.forceEnabled = _this.canEnable;\n\n          _this.empty(message);\n\n          _this.addClass(_this.buttonElement, 'btn-success submit-success');\n\n          _this.removeClass(_this.buttonElement, 'btn-danger submit-fail');\n\n          _this.addClass(message, 'has-success');\n\n          _this.removeClass(message, 'has-error');\n\n          _this.append(message);\n        }, true);\n\n        onChange = function onChange(value, isValid) {\n          _this.removeClass(_this.buttonElement, 'btn-success submit-success');\n\n          _this.removeClass(_this.buttonElement, 'btn-danger submit-fail');\n\n          if (isValid && _this.hasError) {\n            _this.hasError = false;\n\n            _this.empty(message);\n\n            _this.removeChild(message);\n\n            _this.removeClass(message, 'has-success');\n\n            _this.removeClass(message, 'has-error');\n          }\n        };\n\n        onError = function onError() {\n          _this.hasError = true;\n\n          _this.removeClass(_this.buttonElement, 'btn-success submit-success');\n\n          _this.addClass(_this.buttonElement, 'btn-danger submit-fail');\n\n          _this.empty(message);\n\n          _this.removeClass(message, 'has-success');\n\n          _this.addClass(message, 'has-error');\n\n          _this.append(message);\n        };\n      }\n\n      if (this.component.action === 'url') {\n        this.on('requestButton', function () {\n          _this.loading = true;\n          _this.forceDisabled = true;\n        }, true);\n        this.on('requestDone', function () {\n          _this.loading = false;\n          _this.forceEnabled = _this.canEnable;\n        }, true);\n      }\n\n      if (this.component.disableOnInvalid && this.root && this.root.ready) {\n        this.root.ready.then(function () {\n          var isValid = _this.root.checkValidity(_this.root.getValue());\n\n          if (!isValid) {\n            _this.forceDisabled = true;\n          }\n        });\n      }\n\n      this.on('change', function (value) {\n        _this.loading = false;\n\n        if (value && value.hasOwnProperty('isValid')) {\n          if (value.isValid) {\n            _this.forceEnabled = _this.canEnable;\n          } else if (_this.component.disableOnInvalid) {\n            _this.forceDisabled = true;\n          }\n        }\n\n        if (onChange) {\n          onChange(value, value.isValid);\n        }\n      }, true);\n      this.on('error', function () {\n        _this.loading = false;\n\n        if (onError) {\n          onError();\n        }\n      }, true);\n      this.addEventListener(this.buttonElement, 'click', function (event) {\n        _this.triggerReCaptcha();\n\n        _this.dataValue = true;\n\n        if (_this.component.action !== 'submit' && _this.component.showValidations) {\n          _this.emit('checkValidity', _this.data);\n        }\n\n        switch (_this.component.action) {\n          case 'saveState':\n          case 'submit':\n            event.preventDefault();\n            event.stopPropagation();\n\n            _this.emit('submitButton', {\n              state: _this.component.state || 'submitted',\n              component: _this.component\n            });\n\n            break;\n\n          case 'event':\n            _this.emit(_this.interpolate(_this.component.event), _this.data);\n\n            _this.events.emit(_this.interpolate(_this.component.event), _this.data);\n\n            _this.emit('customEvent', {\n              type: _this.interpolate(_this.component.event),\n              component: _this.component,\n              data: _this.data,\n              event: event\n            });\n\n            break;\n\n          case 'custom':\n            {\n              // Get the FormioForm at the root of this component's tree\n              var form = _this.getRoot(); // Get the form's flattened schema components\n\n\n              var flattened = (0, _utils.flattenComponents)(form.component.components, true); // Create object containing the corresponding HTML element components\n\n              var components = {};\n\n              _lodash.default.each(flattened, function (component, key) {\n                var element = form.getComponent(key);\n\n                if (element) {\n                  components[key] = element;\n                }\n              });\n\n              _this.evaluate(_this.component.custom, {\n                form: form,\n                flattened: flattened,\n                components: components\n              });\n\n              break;\n            }\n\n          case 'url':\n            _this.emit('requestButton');\n\n            _this.emit('requestUrl', {\n              url: _this.interpolate(_this.component.url),\n              headers: _this.component.headers\n            });\n\n            break;\n\n          case 'reset':\n            _this.emit('resetForm');\n\n            break;\n\n          case 'delete':\n            _this.emit('deleteSubmission');\n\n            break;\n\n          case 'oauth':\n            if (_this.root === _this) {\n              console.warn('You must add the OAuth button to a form for it to function properly');\n              return;\n            } // Display Alert if OAuth config is missing\n\n\n            if (!_this.component.oauth) {\n              _this.root.setAlert('danger', 'You must assign this button to an OAuth action before it will work.');\n\n              break;\n            } // Display Alert if oAuth has an error is missing\n\n\n            if (_this.component.oauth.error) {\n              _this.root.setAlert('danger', \"The Following Error Has Occured\".concat(_this.component.oauth.error));\n\n              break;\n            }\n\n            _this.openOauth(_this.component.oauth);\n\n            break;\n        }\n      });\n\n      if (this.shouldDisable) {\n        this.forceDisabled = true;\n      }\n\n      function getUrlParameter(name) {\n        name = name.replace(/[[]/, '\\\\[').replace(/[\\]]/, '\\\\]');\n        var regex = new RegExp(\"[\\\\?&]\".concat(name, \"=([^&#]*)\"));\n        var results = regex.exec(location.search);\n\n        if (!results) {\n          return results;\n        }\n\n        return decodeURIComponent(results[1].replace(/\\+/g, ' '));\n      } // If this is an OpenID Provider initiated login, perform the click event immediately\n\n\n      if (this.component.action === 'oauth' && this.component.oauth && this.component.oauth.authURI) {\n        var iss = getUrlParameter('iss');\n\n        if (iss && this.component.oauth.authURI.indexOf(iss) === 0) {\n          this.openOauth();\n        }\n      }\n\n      this.autofocus();\n      this.attachLogic();\n    }\n    /* eslint-enable max-statements */\n\n  }, {\n    key: \"openOauth\",\n    value: function openOauth() {\n      var _this2 = this;\n\n      if (!this.root.formio) {\n        console.warn('You must attach a Form API url to your form in order to use OAuth buttons.');\n        return;\n      }\n\n      var settings = this.component.oauth;\n      /*eslint-disable camelcase */\n\n      var params = {\n        response_type: 'code',\n        client_id: settings.clientId,\n        redirect_uri: window.location.origin || \"\".concat(window.location.protocol, \"//\").concat(window.location.host),\n        state: settings.state,\n        scope: settings.scope\n      };\n      /*eslint-enable camelcase */\n      // Make display optional.\n\n      if (settings.display) {\n        params.display = settings.display;\n      }\n\n      params = Object.keys(params).map(function (key) {\n        return \"\".concat(key, \"=\").concat(encodeURIComponent(params[key]));\n      }).join('&');\n      var url = \"\".concat(settings.authURI, \"?\").concat(params);\n      var popup = window.open(url, settings.provider, 'width=1020,height=618');\n      var interval = setInterval(function () {\n        try {\n          var popupHost = popup.location.host;\n          var currentHost = window.location.host;\n\n          if (popup && !popup.closed && popupHost === currentHost && popup.location.search) {\n            popup.close();\n\n            var _params = popup.location.search.substr(1).split('&').reduce(function (params, param) {\n              var split = param.split('=');\n              params[split[0]] = split[1];\n              return params;\n            }, {});\n\n            if (_params.error) {\n              alert(_params.error_description || _params.error);\n\n              _this2.root.setAlert('danger', _params.error_description || _params.error);\n\n              return;\n            } // TODO: check for error response here\n\n\n            if (settings.state !== _params.state) {\n              _this2.root.setAlert('danger', 'OAuth state does not match. Please try logging in again.');\n\n              return;\n            }\n\n            var submission = {\n              data: {},\n              oauth: {}\n            };\n            submission.oauth[settings.provider] = _params;\n            submission.oauth[settings.provider].redirectURI = window.location.origin || \"\".concat(window.location.protocol, \"//\").concat(window.location.host);\n\n            _this2.root.formio.saveSubmission(submission).then(function (result) {\n              _this2.root.onSubmit(result, true);\n            }).catch(function (err) {\n              _this2.root.onSubmissionError(err);\n            });\n          }\n        } catch (error) {\n          if (error.name !== 'SecurityError') {\n            _this2.root.setAlert('danger', error.message || error);\n          }\n        }\n\n        if (!popup || popup.closed || popup.closed === undefined) {\n          clearInterval(interval);\n        }\n      }, 100);\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      _get(_getPrototypeOf(ButtonComponent.prototype), \"destroy\", this).call(this);\n\n      this.removeShortcut(this.buttonElement);\n    }\n  }, {\n    key: \"focus\",\n    value: function focus() {\n      this.buttonElement.focus();\n    }\n  }, {\n    key: \"triggerReCaptcha\",\n    value: function triggerReCaptcha() {\n      var _this3 = this;\n\n      var recaptchaComponent;\n      this.root.everyComponent(function (component) {\n        if (component.component.type === 'recaptcha' && component.component.eventType === 'buttonClick' && component.component.buttonKey === _this3.component.key) {\n          recaptchaComponent = component;\n          return false;\n        }\n      });\n\n      if (recaptchaComponent) {\n        recaptchaComponent.verify(\"\".concat(this.component.key, \"Click\"));\n      }\n    }\n  }, {\n    key: \"defaultSchema\",\n    get: function get() {\n      return ButtonComponent.schema();\n    }\n  }, {\n    key: \"loading\",\n    set: function set(loading) {\n      this.setLoading(this.buttonElement, loading);\n    }\n  }, {\n    key: \"forceDisabled\",\n    set: function set(disabled) {\n      _set(_getPrototypeOf(ButtonComponent.prototype), \"forceDisabled\", disabled, this, true);\n\n      this.setDisabled(this.buttonElement, disabled);\n    }\n  }, {\n    key: \"emptyValue\",\n    get: function get() {\n      return false;\n    }\n  }, {\n    key: \"clicked\",\n    get: function get() {\n      return this.dataValue;\n    }\n  }, {\n    key: \"defaultValue\",\n    get: function get() {\n      return false;\n    }\n  }, {\n    key: \"dataValue\",\n    set: function set(value) {\n      if (!this.component.input) {\n        return;\n      }\n\n      _set(_getPrototypeOf(ButtonComponent.prototype), \"dataValue\", value, this, true);\n    }\n  }, {\n    key: \"className\",\n    get: function get() {\n      var className = _get(_getPrototypeOf(ButtonComponent.prototype), \"className\", this);\n\n      className += ' form-group';\n      return className;\n    }\n  }], [{\n    key: \"schema\",\n    value: function schema() {\n      for (var _len = arguments.length, extend = new Array(_len), _key = 0; _key < _len; _key++) {\n        extend[_key] = arguments[_key];\n      }\n\n      return _Base.default.schema.apply(_Base.default, [{\n        type: 'button',\n        label: 'Submit',\n        key: 'submit',\n        size: 'md',\n        leftIcon: '',\n        rightIcon: '',\n        block: false,\n        action: 'submit',\n        persistent: false,\n        disableOnInvalid: false,\n        theme: 'default',\n        dataGridLabel: true\n      }].concat(extend));\n    }\n  }, {\n    key: \"builderInfo\",\n    get: function get() {\n      return {\n        title: 'Button',\n        group: 'basic',\n        icon: 'fa fa-stop',\n        documentation: 'http://help.form.io/userguide/#button',\n        weight: 110,\n        schema: ButtonComponent.schema()\n      };\n    }\n  }]);\n\n  return ButtonComponent;\n}(_Base.default);\n\nexports.default = ButtonComponent;",null]}