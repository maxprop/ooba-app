{"remainingRequest":"/Users/scottjoscelyne/Desktop/oasis/node_modules/@angular-devkit/build-optimizer/src/build-optimizer/webpack-loader.js??ref--8-1!/Users/scottjoscelyne/Desktop/oasis/node_modules/formiojs/providers/storage/dropbox.js","dependencies":[{"path":"/Users/scottjoscelyne/Desktop/oasis/node_modules/formiojs/providers/storage/dropbox.js","mtime":1581861143599},{"path":"/Users/scottjoscelyne/Desktop/oasis/node_modules/cache-loader/dist/cjs.js","mtime":1571276078087},{"path":"/Users/scottjoscelyne/Desktop/oasis/node_modules/@angular-devkit/build-optimizer/src/build-optimizer/webpack-loader.js","mtime":1571276072802}],"contextDependencies":[],"result":["\"use strict\";\n\nrequire(\"core-js/modules/es.array.concat\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _nativePromiseOnly = _interopRequireDefault(require(\"native-promise-only\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar dropbox = function dropbox(formio) {\n  return {\n    uploadFile: function uploadFile(file, fileName, dir, progressCallback) {\n      return new _nativePromiseOnly.default(function (resolve, reject) {\n        // Send the file with data.\n        var xhr = new XMLHttpRequest();\n\n        if (typeof progressCallback === 'function') {\n          xhr.upload.onprogress = progressCallback;\n        }\n\n        var fd = new FormData();\n        fd.append('name', fileName);\n        fd.append('dir', dir);\n        fd.append('file', file); // Fire on network error.\n\n        xhr.onerror = function (err) {\n          err.networkError = true;\n          reject(err);\n        };\n\n        xhr.onload = function () {\n          if (xhr.status >= 200 && xhr.status < 300) {\n            var response = JSON.parse(xhr.response);\n            response.storage = 'dropbox';\n            response.size = file.size;\n            response.type = file.type;\n            response.url = response.path_lower;\n            resolve(response);\n          } else {\n            reject(xhr.response || 'Unable to upload file');\n          }\n        };\n\n        xhr.onabort = reject;\n        xhr.open('POST', \"\".concat(formio.formUrl, \"/storage/dropbox\"));\n        var token = formio.getToken();\n\n        if (token) {\n          xhr.setRequestHeader('x-jwt-token', token);\n        }\n\n        xhr.send(fd);\n      });\n    },\n    downloadFile: function downloadFile(file) {\n      var token = formio.getToken();\n      file.url = \"\".concat(formio.formUrl, \"/storage/dropbox?path_lower=\").concat(file.path_lower).concat(token ? \"&x-jwt-token=\".concat(token) : '');\n      return _nativePromiseOnly.default.resolve(file);\n    }\n  };\n};\n\ndropbox.title = 'Dropbox';\nvar _default = dropbox;\nexports.default = _default;",null]}